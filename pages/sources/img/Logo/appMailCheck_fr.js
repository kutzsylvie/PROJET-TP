/*! oxFramework - frontend-apps - v1.13.28 2020-01-08 */
(function (window, angular, $, _){
"use strict";var Mailcheck={domainThreshold:3,secondLevelThreshold:2,topLevelThreshold:2,defaultDomains:["msn.com","bellsouth.net","telus.net","comcast.net","optusnet.com.au","earthlink.net","qq.com","sky.com","icloud.com","mac.com","sympatico.ca","googlemail.com","att.net","xtra.co.nz","web.de","cox.net","gmail.com","ymail.com","aim.com","rogers.com","verizon.net","rocketmail.com","google.com","optonline.net","sbcglobal.net","aol.com","me.com","btinternet.com","charter.net","shaw.ca"],defaultSecondLevelDomains:["yahoo","hotmail","mail","live","outlook","gmx"],defaultTopLevelDomains:["com","com.au","com.tw","ca","co.nz","co.uk","de","fr","it","ru","net","org","edu","gov","jp","nl","kr","se","eu","ie","co.il","us","at","be","dk","hk","es","gr","ch","no","cz","in","net","net.au","info","biz","mil","co.jp","sg","hu","uk"],run:function(a){a.domains=a.domains||Mailcheck.defaultDomains,a.secondLevelDomains=a.secondLevelDomains||Mailcheck.defaultSecondLevelDomains,a.topLevelDomains=a.topLevelDomains||Mailcheck.defaultTopLevelDomains,a.distanceFunction=a.distanceFunction||Mailcheck.sift4Distance;var b=function(a){return a},c=a.suggested||b,d=a.empty||b,e=Mailcheck.suggest(Mailcheck.encodeEmail(a.email),a.domains,a.secondLevelDomains,a.topLevelDomains,a.distanceFunction);return e?c(e):d()},suggest:function(a,b,c,d,e){a=a.toLowerCase();var f=this.splitEmail(a);if(c&&d&&-1!==c.indexOf(f.secondLevelDomain)&&-1!==d.indexOf(f.topLevelDomain))return!1;var g=this.findClosestDomain(f.domain,b,e,this.domainThreshold);if(g)return g!=f.domain&&{address:f.address,domain:g,full:f.address+"@"+g};var h=this.findClosestDomain(f.secondLevelDomain,c,e,this.secondLevelThreshold),i=this.findClosestDomain(f.topLevelDomain,d,e,this.topLevelThreshold);if(f.domain){g=f.domain;var j=!1;if(h&&h!=f.secondLevelDomain&&(g=g.replace(f.secondLevelDomain,h),j=!0),i&&i!=f.topLevelDomain&&""!==f.secondLevelDomain&&(g=g.replace(new RegExp(f.topLevelDomain+"$"),i),j=!0),j)return{address:f.address,domain:g,full:f.address+"@"+g}}return!1},findClosestDomain:function(a,b,c,d){d=d||this.topLevelThreshold;var e,f=1/0,g=null;if(!a||!b)return!1;c||(c=this.sift4Distance);for(var h=0;h<b.length;h++){if(a===b[h])return a;e=c(a,b[h]),e<f&&(f=e,g=b[h])}return f<=d&&null!==g&&g},sift4Distance:function(a,b,c){if(void 0===c&&(c=5),!a||!a.length)return b?b.length:0;if(!b||!b.length)return a.length;for(var d=a.length,e=b.length,f=0,g=0,h=0,i=0,j=0,k=[];f<d&&g<e;){if(a.charAt(f)==b.charAt(g)){i++;for(var l=!1,m=0;m<k.length;){var n=k[m];if(f<=n.c1||g<=n.c2){l=Math.abs(g-f)>=Math.abs(n.c2-n.c1),l?j++:n.trans||(n.trans=!0,j++);break}f>n.c2&&g>n.c1?k.splice(m,1):m++}k.push({c1:f,c2:g,trans:l})}else{h+=i,i=0,f!=g&&(f=g=Math.min(f,g));for(var o=0;o<c&&(f+o<d||g+o<e);o++){if(f+o<d&&a.charAt(f+o)==b.charAt(g)){f+=o-1,g--;break}if(g+o<e&&a.charAt(f)==b.charAt(g+o)){f--,g+=o-1;break}}}f++,g++,(f>=d||g>=e)&&(h+=i,i=0,f=g=Math.min(f,g))}return h+=i,Math.round(Math.max(d,e)-h+j)},splitEmail:function(a){a=null!==a?a.replace(/^\s*/,"").replace(/\s*$/,""):null;var b=a.split("@");if(b.length<2)return!1;for(var c=0;c<b.length;c++)if(""===b[c])return!1;var d=b.pop(),e=d.split("."),f="",g="";if(0===e.length)return!1;if(1==e.length)g=e[0];else{f=e[0];for(var h=1;h<e.length;h++)g+=e[h]+".";g=g.substring(0,g.length-1)}return{topLevelDomain:g,secondLevelDomain:f,domain:d,address:b.join("@")}},encodeEmail:function(a){var b=encodeURI(a);return b=b.replace("%20"," ").replace("%25","%").replace("%5E","^").replace("%60","`").replace("%7B","{").replace("%7C","|").replace("%7D","}")}};"undefined"!=typeof module&&module.exports&&(module.exports=Mailcheck),"function"==typeof define&&define.amd&&define("mailcheck",[],function(){return Mailcheck}),"undefined"!=typeof window&&window.jQuery&&function(a){a.fn.mailcheck=function(a){var b=this;if(a.suggested){var c=a.suggested;a.suggested=function(a){c(b,a)}}if(a.empty){var d=a.empty;a.empty=function(){d.call(null,b)}}a.email=this.val(),Mailcheck.run(a)}}(jQuery),function(a,b,c){b.module("appMailCheck",[]).config(["oxModuleConfigProvider",function(a){a.initModule({name:"appMailCheck",type:"app",hasTranslations:!1,defaultConfig:{}})}]).run(["oxModuleLoader",function(a){a.run("appMailCheck",{desktop:[{name:"appMailCheck",condition:"#maincontainer form",target:'input[wbvaltype="1"], input[name="EMail"], input[name="EmailAddress"], input[name="CommentEmail"], input[name="email"], input[name="newsformEmail"], input#userloginemail',method:"add",bindConfig:[]}],mobile:[{name:"appMailCheck",persist:!0,target:'input[type="email"]',method:"after",bindConfig:["serviceName"]}]})}])}(window,window.angular),function(a,b,c,d,e){var f="appMailCheck";b.module("appMailCheck").directive(f,["Directive","oxDirective","$parse","$filter",function(a,b,g,h){return new(a.extend({scope:{},link:function(a,i,j){new(b.extend({name:f,bindConfigToScope:!0,defaultConfig:{},translation:[{suggestion:"Vouliez-vous dire {{suggestion}} ?"},{suggestion:"Did you mean {{suggestion}}?"},{suggestion:"\xbfQuieres decir: {{suggestion}}?"},{},{suggestion:"Intendi dire {{suggestion}}?"},{},{},{}],domains:["gmail.com","hotmail.fr","orange.fr","hotmail.com","wanadoo.fr","yahoo.fr","free.fr","marketplace.amazon.fr","sfr.fr","laposte.net","live.fr","noreply.fr","neuf.fr","aol.com","hotmail.co.uk","btinternet.com","marketplace.amazon.co.uk","yahoo.com","yahoo.co.uk","msn.com","bbox.fr","aliceadsl.fr","voila.fr","club-internet.fr","outlook.fr","outlook.com","icloud.com","cegetel.net","sky.com","yahoo.es","marketplace.amazon.it","googlemail.com","hotmail.es","numericable.fr","me.com","live.co.uk","marketplace.amazon.es","ntlworld.com","skynet.be","marketplace.amazon.de","bluewin.ch","libero.it","talktalk.net","clemarche.com","ymail.com","live.com","tiscali.co.uk","menara.ma","dbmail.com","blueyonder.co.uk"],inputWidth:0,suggestedPlace:null,init:function(){e.isMobile?this.target=this.elem.prev('input[type="email"]'):"input"===this.elem.get(0).tagName.toLowerCase()?(this.target=this.elem,this.target.parent().css("position","relative")):(this.target=c('input[type="text"]',this.elem).eq(0),this.target.css("position","relative")),this.inputWidth=this.target.outerWidth(),this._super(),this.createSuggestedPlace(),this.setLibrary()},whenScopeDestroy:function(){this.suggestedPlace.off("click",this.setSuggestedMail.bind(this)),this.suggestedPlace.remove(),this._super()},createSuggestedPlace:function(){this.suggestedPlace||(this.innerSuggested=c('<div class="c-app-mail-check__inner-suggested is-'+e.device+'"></div>'),this.suggestedPlace=c('<div class="c-app-mail-check__suggested"></div>'),this.suggestedPlace.on("click",this.setSuggestedMail.bind(this)),this.innerSuggested.append(this.suggestedPlace),this.innerSuggested.hide(),this.target.after(this.innerSuggested),this.closeSuggested=c('<div class="c-app-mail-check__close"></div>'),e.isMobile&&this.closeSuggested.html('<i class="ox-iconfont ox-iconfont-close c-cs-icon c-cs-icon--type-button"></i>'),this.closeSuggested.on("click",this.closeSuggestedMail.bind(this)))},setLibrary:function(){var a=this,b=d.debounce(function(){a.showSuggest()},400);this.target.on("keyup",function(){/^.+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]{2,}/.test(a.target.val())?b():a.innerSuggested.hide()})},showSuggest:function(){var a=this;this.target.mailcheck({domains:this.domains,secondLevelDomains:[],topLevelDomains:[],suggested:function(b,c){a.setSuggestion(c)},empty:function(){a.innerSuggested.hide()}})},setSuggestion:function(a){var b=h("template")(this.$scope.translation.suggestion,{suggestion:'<span class="c-app-mail-check__suggested-value">'.concat(a.full,"</span>")});this.suggestedPlace.html(b),this.innerSuggested.append(this.closeSuggested),this.suggestedPlace.attr("suggested",a.full),this.innerSuggested.show()},closeSuggestedMail:function(){this.innerSuggested.hide()},setSuggestedMail:function(){if(""!==this.suggestedPlace.attr("suggested")){var a=this.target.scope();a&&this.target.attr("ng-model")?a.$apply(function(){g(this.target.attr("ng-model")).assign(a,this.suggestedPlace.attr("suggested"))}.bind(this)):this.target.val(this.suggestedPlace.attr("suggested")),this.innerSuggested.hide()}}}))(a,{elem:i,attrs:j})}}))({name:f,hasExternalTemplate:!1,type:"app",module:"appMailCheck"})}])}(window,window.angular,window.angular.element,window._,window.oxFramework);})(window, window.angular, window.angular.element, window._);